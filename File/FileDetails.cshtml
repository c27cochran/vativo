@model Vativo.UI.ViewModels.ClaimRequestFileViewModel
@using Microsoft.AspNetCore.Http
@inject IHttpContextAccessor HttpContextAccessor
@{
    ViewBag.Title = ":: VativoRx :: Claim List";
}


<form method="post" class="postMar">
    <section>
        <div class="container">
            <div class="@ViewBag.cssClass" role="alert">
                <strong>@ViewBag.message</strong>
            </div>
        </div>
        <div class="">
            <div class="">
                <div class="">
                    <div class="clearfix formb-bt-border">
                        <div class="left clientnameHead">
                            <h4>Submission List</h4>
                        </div>
                        @{
                            if ((@HttpContextAccessor.HttpContext.Session.GetString(Utility.ROLENAME) != ROLE_NAME.VATIVO_SALES_REPRESENTATIVE))
                            {
                                <div class="right clientcomnBtn">
                                    @Html.ActionLink("Upload File", "FileUpload", "file", null, new { @class = "btn btn-primary btn-round" })
                                </div>
                            }
                        }
                    </div>

                    <table id="tblFile" class="table table-striped table-bordered fldTbl" cellspacing="0" width="100%">
                        <thead class="thead-inverse">
                            <tr>
                                @{
                                    if ((@HttpContextAccessor.HttpContext.Session.GetString(Utility.ROLENAME) == ROLE_NAME.ADMIN) || @HttpContextAccessor.HttpContext.Session.GetString(Utility.ROLENAME) == ROLE_NAME.VATIVO_STANDARD_USER)
                                    {
                                        <th></th>
                                    } }
                                <th style="width: 33px">Serial No.</th>
                                @*<th>Submission Id</th>*@
                                <th>Client Name</th>
                                <th>GroupID</th>
                                <th>Uploaded Date</th>
                                <th>Last Modified By</th>
                                <th>Processed Complete Date</th>
                                <th>File Type</th>
                                <th>No. of Claims</th>
                                @{
                                    if ((@HttpContextAccessor.HttpContext.Session.GetString(Utility.ROLENAME) != ROLE_NAME.VATIVO_SALES_REPRESENTATIVE))
                                    {
                                        <th>Duplicate Claim Count</th>
                                        <th>Uploaded File Name</th>
                                    } }
                                @{
                                    if ((@HttpContextAccessor.HttpContext.Session.GetString(Utility.ROLENAME) != ROLE_NAME.VATIVO_SALES_REPRESENTATIVE))
                                    {
                                        <th class="text-center">Validation Success</th>
                                        @*<th class="text-center"> NPI   Failed </th>*@
                                        <th class="text-center">Generic Medicine</th>
                                        <th class="text-center">Other Exception</th>
                                        @*<th class="text-center">Optum Hold</th>*@
                                        @*<th class="text-center">System Exception</th>*@
                                        <th class="text-center">Claim Status</th>
                                        <th>No. of Rejection Claims</th>
                                        
                                        <th align="center">Action</th>
                                    }
                                }

                                @*<th class="text-center">History</th>*@
                            </tr>
                        </thead>
                        <tbody>
                            @{

                                var i = 1;

                                foreach (var item in ViewBag.FileList)
                                {
                                    var j = 1;
                                    <tr>
                                        @{
                                            if ((@HttpContextAccessor.HttpContext.Session.GetString(Utility.ROLENAME) == ROLE_NAME.ADMIN) || @HttpContextAccessor.HttpContext.Session.GetString(Utility.ROLENAME) == ROLE_NAME.VATIVO_STANDARD_USER)
                                            {
                                                <td>

                                                    @if (item.fileDetailViewModelChildList.Count > 0)
                                                    {
                                                        <img src="~/Images/plus.png" />
                                                        <div style="display:none">
                                                            <table cellpadding="0" cellspacing="0" class="ChildGrid">
                                                                <tr>
                                                                    <th>Serial No.</th>
                                                                    @*<th>Submission Id</th>*@
                                                                    <th>Client Name</th>
                                                                    <th>GroupID</th>
                                                                    <th>Uploaded Date</th>
                                                                    <th>Last Modified By</th>
                                                                    <th>Processed Complete Date</th>
                                                                    <th>File Type</th>
                                                                    <th>No. of Claims</th>
                                                                    @{
                                                                        if ((@HttpContextAccessor.HttpContext.Session.GetString(Utility.ROLENAME) == ROLE_NAME.ADMIN) || @HttpContextAccessor.HttpContext.Session.GetString(Utility.ROLENAME) == ROLE_NAME.VATIVO_STANDARD_USER)
                                                                        {
                                                                            <th class="text-center">Validation Success</th>
                                                                            @*<th class="text-center"> NPI   Failed </th>*@
                                                                            <th class="text-center">Generic Medicine</th>
                                                                            <th class="text-center">Other Exception</th>
                                                                            @*<th class="text-center">Optum Hold</th>*@
                                                                            @*<th class="text-center">System Exception</th>*@
                                                                            <th class="text-center">Claim Status</th>
                                                                            <th>No. of Rejection Claims</th>
                                                                            //if ((@HttpContextAccessor.HttpContext.Session.GetString(Utility.ROLENAME) == ROLE_NAME.ADMIN || @HttpContextAccessor.HttpContext.Session.GetString(Utility.ROLENAME) == ROLE_NAME.VATIVO_STANDARD_USER))
                                                                            //{
                                                                            <th align="center">Action</th>
                                                                            //}
                                                                        }
                                                                    }
                                                                </tr>

                                                                @foreach (var child in item.fileDetailViewModelChildList)
                                                                {
                                                                    <tr>
                                                                        <td>
                                                                            <label>@j</label>
                                                                        </td>

                                                                        <td>
                                                                            <label asp-for="CreatedBy">@child.ClientName</label>
                                                                        </td>
                                                                        <td>
                                                                            <label asp-for="GroupId">@child.GroupId</label>
                                                                        </td>
                                                                        <td>
                                                                            <label asp-for="CreatedOn">@child.CreatedOn</label>
                                                                        </td>
                                                                        <td>
                                                                            <label asp-for="ModifiedBy">@child.ModifiedBy</label>
                                                                        </td>
                                                                        <td>
                                                                            <label>@child.Processedcompletedate</label>
                                                                        </td>
                                                                        <td>
                                                                            <label asp-for="Filetype">@child.filetype</label>
                                                                        </td>
                                                                        <td>
                                                                            <label asp-for="FileRowCount">@child.FileRowCount</label>
                                                                        </td>
                                                                        @{
                                                                            if ((@HttpContextAccessor.HttpContext.Session.GetString(Utility.ROLENAME) == ROLE_NAME.ADMIN) || @HttpContextAccessor.HttpContext.Session.GetString(Utility.ROLENAME) == ROLE_NAME.VATIVO_STANDARD_USER)
                                                                            {
                                                                                <td align="center">
                                                                                    @if (child.FileStatus != "Pending")
                                                                                    {
                                                                                        if (child.ValidFileCount > 0)
                                                                                        {
                                                                                            <a id="download" href="@Url.Action("FileDownload", "file", new { ClaimRequestId = child.UniqueClaimRequestId, FileType = "Valid" }) ">Download</a>
                                                                                            @*<a href="@Url.Action("index", "file", new { _id = child.Id, type="ValidNPI"  })" title="View" data-id=@child.Id>View</a>*@
                                                                                            <span>(@child.ValidFileCount)</span>
                                                                                        }
                                                                                        else
                                                                                        { <span>Not Available</span>}
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span>In Process</span>
                                                                                    }
                                                                                </td>
                                                                            
                                                                                <td align="center">
                                                                                    @if (child.FileStatus != "Pending")
                                                                                    {
                                                                                        if (child.GenericMedicineFileCount > 0)
                                                                                        {
                                                                                            <a id="download" href="@Url.Action("FileDownload", "file", new { ClaimRequestId = child.UniqueClaimRequestId, FileType = "GenericFailed" })">Download</a>
                                                                                            <span>(@child.GenericMedicineFileCount)</span>
                                                                                        }
                                                                                        else
                                                                                        { <span>Not Available</span>}
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span>In Process</span>
                                                                                    }
                                                                                </td>
                                                                                <td align="center">
                                                                                    @if (child.FileStatus != "Pending")
                                                                                    {
                                                                                        if (child.ValidationFailedCount > 0)
                                                                                        {
                                                                                            <a id="download" href="@Url.Action("FileDownload", "file", new { ClaimRequestId = child.UniqueClaimRequestId, FileType = "ValidationFailed" })">Download</a>
                                                                                            <span>(@child.ValidationFailedCount)</span>
                                                                                        }
                                                                                        else
                                                                                        { <span>Not Available</span>}
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span>In Process</span>
                                                                                    }
                                                                                </td>

                                                                              
                                                                                <td>
                                                                                    @if (child.Iscompleted == true)
                                                                                    {
                                                                                        if (child.RxLincResponseFileCount > 0)
                                                                                        {
                                                                                            <a id="download" href="@Url.Action("FileDownload", "file", new { ClaimRequestId = child.UniqueClaimRequestId, FileType = "RxlincFile" })">Download</a>
                                                                                            <span>(@child.RxLincResponseFileCount)</span>
                                                                                        }
                                                                                        else
                                                                                        {<span>(@child.RxLincResponseFileCount)</span>}
                                                                                }
                                                                                else
                                                                                { <span>Not Available</span>}
                                                                                </td>

                                                                                <td align="center">
                                                                                    @if (child.Iscompleted == true)
                                                                                    {
                                                                                        if (child.RejectionCount > 0)
                                                                                        {
                                                                                            <a id="download" href="@Url.Action("FileDownload", "file", new { ClaimRequestId = child.UniqueClaimRequestId, FileType = "RxlincRejectFile" })">Download</a>
                                                                                            <span>(@child.RejectionCount)</span>
                                                                                        }
                                                                                        else
                                                                                        {<span>(@child.RejectionCount)</span>}
                                                                                }
                                                                                else
                                                                                { <span>Not Available</span>}
                                                                                    @*<label asp-for="RejectionCount">@child.RejectionCount</label>*@
                                                                                </td>

                                                                                <td>
                                                                                    <input asp-for="UniqueClaimRequestId" type="hidden" value="@child.UniqueClaimRequestId" />
                                                                                    @if ((@HttpContextAccessor.HttpContext.Session.GetString(Utility.ROLENAME) == ROLE_NAME.CLIENT_ADMIN) || (@HttpContextAccessor.HttpContext.Session.GetString(Utility.ROLENAME) == ROLE_NAME.STANDARD_USER))
                                                                                    {

                                                                                        @if ((child.IsRxlincUpload == true && child.RxLincResponseFileCount == 0 && child.RejectionCount == 0) || child.FileStatus == "Sending")
                                                                                        {
                                                                                            <a title="Delete" data-id=@child.UniqueClaimRequestId onclick="return confirm('This claim file has been submitted for processing, please contact your account manager if the claim file was submitted in error');"> <img class="icon-mar" src="/images/ico/delete.png"></a>
                                                                                        }
                                                                                        else if (@child.RxLincResponseFileCount == 0 && child.RejectionCount == 0)
                                                                                        {
                                                                                            <a href="@Url.Action("DeleteRequest", "File", new { UniqueClaimRequestId = child.UniqueClaimRequestId })" title="Delete" data-id=@child.UniqueClaimRequestId onclick="return confirm('Are you sure, you want to delete?');"> <img class="icon-mar" src="/images/ico/delete.png"></a>
                                                                                        }
                                                                                    }
                                                                                    else
                                                                                    {

                                                                                        @if ((child.IsRxlincUpload == true && child.RxLincResponseFileCount == 0 && child.RejectionCount == 0) || child.FileStatus == "Sending")
                                                                                        {
                                                                                            <a title="Delete" data-id=@child.UniqueClaimRequestId onclick="return confirm('This claim file has been submitted for processing,claims must be reversed.');"> <img class="icon-mar" src="/images/ico/delete.png"></a>
                                                                                        }
                                                                                        else if (child.RxLincResponseFileCount == 0 && child.RejectionCount == 0)
                                                                                        {
                                                                                            <a href="@Url.Action("DeleteRequest", "File", new { UniqueClaimRequestId = child.UniqueClaimRequestId })" title="Delete" data-id=@child.UniqueClaimRequestId onclick="return confirm('Are you sure, you want to delete?');"> <img class="icon-mar" src="/images/ico/delete.png"></a>
                                                                                        }
                                                                                    }
                                                                                </td>

                                                                            }
                                                                        }
                                                                    </tr>
                                                                    j++;
                                                                }

                                                            </table>
                                                        </div>
                                                    }
                                                </td>
                                            }
                                        }

                                        <td>
                                            <label>@i</label>
                                        </td>
                                        <td>
                                            <label asp-for="CreatedBy">@item.ClientName</label>
                                        </td>
                                        <td>
                                            <label asp-for="GroupId">@item.GroupId</label>
                                        </td>
                                        <td>
                                            <label asp-for="CreatedOn">@item.CreatedOn</label>
                                        </td>
                                        <td>
                                            <label asp-for="ModifiedBy">@item.ModifiedBy</label>
                                        </td>
                                        <td>
                                            <label>@item.Processedcompletedate</label>
                                        </td>
                                        <td>
                                            <label asp-for="Filetype">@item.filetype</label>
                                        </td>
                                        <td>
                                            <label asp-for="FileRowCount">@item.FileRowCount</label>

                                        </td>
                                        @{
                                            if ((@HttpContextAccessor.HttpContext.Session.GetString(Utility.ROLENAME) != ROLE_NAME.VATIVO_SALES_REPRESENTATIVE))
                                            {
                                                <td>
                                                    <label asp-for="Duplicatecount">@item.Duplicatecount</label>
                                                </td>
                                                <td>
                                                    <label>@item.Originfilename</label>

                                                    <a id="download" href="@Url.Action("FileDownload", "file", new { ClaimRequestId = item.UniqueClaimRequestId, FileType = "Rawfile" }) ">Download</a>


                                                </td>
                                            }
                                        }
                                        @{
                                            if ((@HttpContextAccessor.HttpContext.Session.GetString(Utility.ROLENAME) != ROLE_NAME.VATIVO_SALES_REPRESENTATIVE))
                                            {
                                                <td align="center">
                                                    @if (item.FileStatus != "Pending")
                                                    {
                                                        if (item.ValidFileCount > 0)
                                                        {
                                                            if (item.fileDetailViewModelChildList.Count == 0)
                                                            {
                                                                <a id="download" href="@Url.Action("FileDownload", "file", new { ClaimRequestId = item.UniqueClaimRequestId, FileType = "Valid" }) ">Download</a>
                                                                @*<a href="@Url.Action("index", "file", new { _id = item.Id, type="ValidNPI"  })" title="View" data-id=@item.Id>View</a>*@
                                                                <span>(@item.ValidFileCount)</span>
                                                            }
                                                            else
                                                            { <span>(@item.ValidFileCount)</span>}

                                                    }
                                                    else
                                                    { <span>Not Available</span>}
                                                }
                                                else
                                                {
                                                    <span>In Process</span>
                                                }
                                                </td>
                                                @*<td align="center">
                                                        @if (item.FileStatus != "Pending")
                                                        {
                                                            if (item.NPIFailedFileCount > 0)
                                                            {
                                                                if (item.fileDetailViewModelChildList.Count == 0)
                                                                {
                                                                    <a id="download" href="@Url.Action("FileDownload", "file", new { ClaimRequestId = item.UniqueClaimRequestId, FileType = "NPIFaild" })">Download</a>
                                                                    <span>(@item.NPIFailedFileCount)</span>
                                                                }
                                                                else
                                                                {
                                                                    <span>(@item.NPIFailedFileCount)</span>
                                                                }
                                                            }
                                                            else
                                                            { <span>Not Available</span>}

                                                        }
                                                        else
                                                        {
                                                            <span>In Process</span>
                                                        }
                                                    </td>*@
                                                <td align="center">
                                                    @if (item.FileStatus != "Pending")
                                                    {
                                                        if (item.GenericMedicineFileCount > 0)
                                                        {
                                                            if (item.fileDetailViewModelChildList.Count == 0)
                                                            {
                                                                <a id="download" href="@Url.Action("FileDownload", "file", new { ClaimRequestId = item.UniqueClaimRequestId, FileType = "GenericFailed" })">Download</a>
                                                                <span>(@item.GenericMedicineFileCount)</span>
                                                            }
                                                            else
                                                            {
                                                                <span> (@item.GenericMedicineFileCount) </span>
                                                            }
                                                        }
                                                        else
                                                        { <span>Not Available</span>}
                                                    }
                                                    else
                                                    {
                                                        <span>In Process</span>
                                                    }
                                                </td>
                                                <td align="center">
                                                    @if (item.FileStatus != "Pending")
                                                    {
                                                        if (item.ValidationFailedCount > 0)
                                                        {
                                                            if (item.fileDetailViewModelChildList.Count == 0)
                                                            {
                                                                <a id="download" href="@Url.Action("FileDownload", "file", new { ClaimRequestId = item.UniqueClaimRequestId, FileType = "ValidationFailed" })">Download</a>
                                                                <span>(@item.ValidationFailedCount)</span>
                                                            }
                                                            else
                                                            {
                                                                <span>(@item.ValidationFailedCount)</span>
                                                            }
                                                        }
                                                        else
                                                        { <span>Not Available</span>}
                                                    }
                                                    else
                                                    {
                                                        <span>In Process</span>
                                                    }
                                                </td>

                                                @*<td align="center">
                                                        @if (item.FileStatus != "Pending")
                                                        {
                                                            if (item.SystemExceptionFileCount > 0)
                                                            {
                                                                if (item.fileDetailViewModelChildList.Count == 0)
                                                                {
                                                                    <a id="download" href="@Url.Action("FileDownload", "file", new { ClaimRequestId = item.UniqueClaimRequestId, FileType = "System" })">Download</a>
                                                                    <span>(@item.SystemExceptionFileCount)</span>
                                                                }
                                                                else
                                                                {

                                                                    <span>(@item.SystemExceptionFileCount)</span>
                                                                }
                                                            }
                                                            else
                                                            { <span>Not Available</span>}
                                                        }
                                                        else
                                                        {
                                                            <span>In Process</span>
                                                        }
                                                    </td>*@
                                                <td>
                                                    @if (item.Iscompleted == true)
                                                    {
                                                        if (item.RxLincResponseFileCount > 0)
                                                        {
                                                            if (item.fileDetailViewModelChildList.Count == 0 && item.filetype == "ReversalFile")
                                                            {
                                                                <a id="download" href="@Url.Action("FileDownload", "file", new { ClaimRequestId = item.UniqueClaimRequestId, FileType = "RxlincFile" })">Download</a>
                                                                <span>(@item.RxLincResponseFileCount)</span>
                                                            }
                                                            else if (item.fileDetailViewModelChildList.Count == 0 && (item.ValidFileCount <= (item.RxLincResponseFileCount + item.RejectionCount)))
                                                            {
                                                                <a id="download" href="@Url.Action("FileDownload", "file", new { ClaimRequestId = item.UniqueClaimRequestId, FileType = "RxlincFile" })">Download</a>
                                                                <span>(@item.RxLincResponseFileCount)</span>
                                                            }
                                                            else
                                                            {
                                                                <span>(@item.RxLincResponseFileCount)</span>
                                                            }
                                                        }
                                                        else
                                                        { <span>(@item.RxLincResponseFileCount)</span>}
                                                }
                                                else
                                                { <span>Not Available</span>}
                                                </td>

                                                <td align="center">
                                                    @if (item.Iscompleted == true)
                                                    {
                                                        if (item.RejectionCount > 0)
                                                        {
                                                            if (item.fileDetailViewModelChildList.Count == 0 && item.filetype == "ReversalFile")
                                                            {
                                                                <a id="download" href="@Url.Action("FileDownload", "file", new { ClaimRequestId = item.UniqueClaimRequestId, FileType = "RxlincRejectFile" })">Download</a>
                                                                <span>(@item.RejectionCount)</span>
                                                            }
                                                            else if (item.fileDetailViewModelChildList.Count == 0 && (item.ValidFileCount <= (item.RxLincResponseFileCount + item.RejectionCount)))
                                                            {
                                                                <a id="download" href="@Url.Action("FileDownload", "file", new { ClaimRequestId = item.UniqueClaimRequestId, FileType = "RxlincRejectFile" })">Download</a>
                                                                <span>(@item.RejectionCount)</span>
                                                            }
                                                            else
                                                            {
                                                                <span>(@item.RejectionCount)</span>
                                                            }
                                                        }
                                                        else
                                                        {<span>(@item.RejectionCount)</span> }
                                                }
                                                else
                                                { <span>Not Available</span>}
                                                    @*<label asp-for="RejectionCount">@item.RejectionCount</label>*@
                                                </td>

                                                <td>
                                                    <input asp-for="UniqueClaimRequestId" type="hidden" value="@item.UniqueClaimRequestId" />
                                                    @if ((@HttpContextAccessor.HttpContext.Session.GetString(Utility.ROLENAME) == ROLE_NAME.CLIENT_ADMIN) || (@HttpContextAccessor.HttpContext.Session.GetString(Utility.ROLENAME) == ROLE_NAME.STANDARD_USER))
                                                    {

                                                        @if ((item.IsRxlincUpload == true && item.RxLincResponseFileCount == 0 && item.fileDetailViewModelChildList.Count == 0) || item.FileStatus == "Sending")
                                                        {
                                                            <a title="Delete" data-id=@item.UniqueClaimRequestId onclick="return confirm('This claim file has been submitted for processing, please contact your account manager if the claim file was submitted in error');"> <img class="icon-mar" src="/images/ico/delete.png"></a>
                                                        }
                                                        else if (item.RxLincResponseFileCount == 0 && @item.RejectionCount == 0 && item.fileDetailViewModelChildList.Count == 0)
                                                        {
                                                            <a href="@Url.Action("DeleteRequest", "File", new { UniqueClaimRequestId = item.UniqueClaimRequestId })" title="Delete" data-id=@item.UniqueClaimRequestId onclick="return confirm('Are you sure, you want to delete?');"> <img class="icon-mar" src="/images/ico/delete.png"></a>
                                                        }
                                                    }
                                                    else
                                                    {

                                                        @if ((item.IsRxlincUpload == true && item.RxLincResponseFileCount == 0 && item.fileDetailViewModelChildList.Count == 0) || item.FileStatus == "Sending")
                                                        {
                                                            <a title="Delete" data-id=@item.UniqueClaimRequestId onclick="return confirm('This claim file has been submitted for processing,claims must be reversed.');"> <img class="icon-mar" src="/images/ico/delete.png"></a>
                                                        }
                                                        else if (@item.RxLincResponseFileCount == 0 && @item.RejectionCount == 0 && item.fileDetailViewModelChildList.Count == 0)
                                                        {
                                                            <a href="@Url.Action("DeleteRequest", "File", new { UniqueClaimRequestId = item.UniqueClaimRequestId })" title="Delete" data-id=@item.UniqueClaimRequestId onclick="return confirm('Are you sure, you want to delete?');"> <img class="icon-mar" src="/images/ico/delete.png"></a>
                                                        }
                                                    }
                                                </td>

                                            }
                                        }

                                    </tr>
                                    i++;
                                }
                            }
                        </tbody>
                    </table>
                </div>
            </div>
            <!-- latest-jobs-ads -->
            <div class="modal fade" tabindex="-1" id="loginModal"
                 data-keyboard="false" data-backdrop="static">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <a class="close" data-dismiss="modal">Close</a>
                            @*<button type="button" class="close" data-dismiss="modal">
                                    ×
                                </button>*@
                        </div>

                        <div class="modal-body">
                            <div id="fileHistory">

                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--Model Popup End-->
        </div><!-- container -->
    </section><!-- ad-profile-page -->
</form>

<script type="text/javascript" class="init">

    $("body").on("click", "img[src*='plus.png']", function () {
        $(this).closest("tr").after("<tr><td></td><td colspan = '999'>" + $(this).next().html() + "</td></tr>");
        $(this).attr("src", "/images/minus.png");
    });
    //Assign Click event to Minus Image.
    $("body").on("click", "img[src*='minus.png']", function () {
        $(this).attr("src", "/images/plus.png");
        $(this).closest("tr").next().remove();
    });

    $(document).ready(function () {
        var sort_col = $('#tblFile').find("th:contains('Serial No.')")[0].cellIndex;
        $('#tblFile').DataTable({
            "pagingType": "input",
            "scrollX": true,
            "columnDefs": [
                { "orderable": false, "targets": -1 },
                { "orderable": false, "targets": 0 }
            ],
            "order": [[sort_col, "asc"]]
        });

    });
    $(document).ready(function () {
        $("#btnHideModal").click(function () {
            $("#loginModal").modal('hide');
        });
    });

    window.setTimeout(function () {
        $(".alert").fadeTo(500, 0).slideUp(500, function () {
            $(this).remove();
            var url = window.location.href;
            var query = url.split("?")[0];
            window.location.href = query;
        });
    }, 4000);

    function loadPartialView(id) {
        $.ajax({
            type: "GET",
            url: "FileHistory",
            data: { ClaimRequestId: id },
            dataType: "html",
            success: function (response) {
                $('#fileHistory').html(response);
                $("#loginModal").modal('show');
                //$("#fileHistory").dialog("open");
            },
            failure: function (response) {
                alert(response.responseText);
            },
            error: function (response) {
                alert(response.responseText);
            }
        });
    }
</script>
